{{- define "services" -}}
  <mj-accordion border="1px" icon-wrapped-url="http://i.imgur.com/Xvw0vjq.png" icon-unwrapped-url="http://i.imgur.com/KKHenWa.png" icon-height="24px" icon-width="24px">
    {{- range $index, $service := . -}}
      <mj-accordion-element>
        <mj-accordion-title font-size="24px">
          {{- if .success -}}
            âœ…
          {{- else -}}
            ðŸ”´
          {{- end -}}&nbsp;{{- $service.name -}}
        </mj-accordion-title>
        <mj-accordion-text background-color="#f5f5f5">
            ID:&nbsp;<span style="font-family: 'Courier new';">{{- $service.containerId -}}</span>
            <br />
            Image:&nbsp;<span style="font-family: 'Courier new';">{{- $service.image -}}</span>

            <h3>Logs</h3>
            <div style="padding: 2px; background-color: #3a3a3a; color: #f8f8f8; font-size: 10px; font-family: 'Courier new';">
              {{- range $log := .logs -}}
                <div>{{- $log -}}</div>
              {{- end -}}
            </div>
        </mj-accordion-text>
      </mj-accordion-element>
    {{- end -}}
  </mj-accordion>
{{- end -}}

<mjml>
  <mj-body>
    <mj-container background-color="#e1e1e8">
      <mj-section background-color="#3a3a3a">
        <mj-column>
          <mj-text align="center" color="#f8f8f8" padding="0" font-size="24px" font-weight="bold">Dashboard</mj-text>
        </mj-column>
      </mj-section>

      <mj-section background-color="#ffffff">
        <mj-column>
          <mj-text align="center">
            <h1>
              {{- if .success -}}
                <span style="color: #4cae4c;">Successful</span>
              {{- else -}}
                <span style="color: #ff6347;">Failed</span>
              {{- end -}}
              &nbsp;deploy of <a href="{{- .url -}}/?filter={{- .app -}}" rel="noreferrer noopener" target="_blank">
              <strong>{{- .app -}}</strong>
            </h1>
          </mj-text>

          <mj-text>
              <h2>Deployed services</h2>
          </mj-text>

          {{- template "services" .services -}}
        </mj-column>
      </mj-section>

      {{- template "footer" -}}

    </mj-container>
  </mj-body>
</mjml>
