{{- define "services" -}}
  <mj-table>
    <tr>
      <th>Name</th>
      <th>Container ID</th>
      <th>Container Name</th>
      <th>Image</th>
    </tr>

    {{- range $index, $service := . -}}
      <tr {{- if odd $index }} style="background-color: #e1e1e8"{{- end -}}>
        <td align="center">{{- $service.name -}}</td>
        <td align="center">
          <span style="font-family: 'Courier new';">
            {{- $service.containerId -}}
          </span>
        </td>
        <td align="center">{{- $service.containerName -}}</td>
        <td align="center" font-family="Courier new">
          {{- $service.image -}}
        </td>
      </tr>
    {{- end -}}
  </mj-table>
{{- end -}}

<mjml>
  <mj-body>
    <mj-container background-color="#e1e1e8">
      <mj-section background-color="#3a3a3a">
        <mj-column>
          <mj-text align="center" color="#f8f8f8" padding="0" font-size="24px" font-weight="bold">Dashboard</mj-text>
        </mj-column>
      </mj-section>

      <mj-section background-color="#ffffff">
        <mj-column>
          <mj-text>
            <span style="color: #4cae4c;">Successful</span> deployment of <a href="{{- .url -}}/?filter={{- .app -}}" rel="noreferrer noopener" target="_blank">
              <strong>{{- .app -}}</strong>
            </a>
          </mj-text>

          <mj-text>
              <h2>Deployed services</h2>
          </mj-text>
          {{- template "services" .services -}}

          <mj-text align="center" font-size="9px" font-style="italic" color="#696969">
              Generated by <a href="https://github.com/ViBiOh/mailer" rel="noopener noreferrer" target="_blank">Mailer</a>, converted by <a href="https://mjml.io" rel="noopener noreferrer" target="_blank">MJML</a>, sent by <a href="https://www.mailjet.com/" rel="noopener noreferrer" target="_blank">Mailjet</a>, powered by <a href="https://vibioh.fr" rel="noopener noreferrer" target="_blank">ViBiOh</a>
          </mj-text>
        </mj-column>
      </mj-section>
    </mj-container>
  </mj-body>
</mjml>
